// SPDX-License-Identifier: GPL-2.0
/dts-v1/;

#include "tegra30-cardhu.dtsi"

/* This dts file support the cardhu Ouya game console */

/ {
	model = "NVIDIA Tegra30 Cardhu Ouya game console";
	compatible = "nvidia,cardhu-ouya", "nvidia,cardhu", "nvidia,tegra30";

	aliases {
		serial0 = &uartd;
	};

	fan {
		compatible = "gpio_leds";
		gpio = <&gpio TEGRA_GPIO(J, 2) GPIO_ACTIVE_HIGH>;
		default-state = "on";
	};

	sound {
		status = "disabled";
	};

	chosen {
		stdout-path = "serial0:115200n8";
	};

	cache-controller@50043000 {
/*
		arm,shared-override;
		arm,outer-sync-disable;
		wt-override;
		arm,early-bresp-disable;
		arm,full-line-zero-disable;
*/
	};

	firmware {
		trusted-foundations {
			compatible = "tlm,trusted-foundations";
			tlm,version-major = <0x2>;
			tlm,version-minor = <0x8>;
			};
	};

	sdhci@78000400 {
		status = "okay";
		power-gpios = <&gpio TEGRA_GPIO(D, 3) GPIO_ACTIVE_HIGH>;
		bus-width = <4>;
		keep-power-in-suspend;
	};

	backlight: backlight {
		status = "disabled";
	};

	panelddc: i2c@7000c000 {
		status = "disabled";
	};

	i2c@7000c400 {
		status = "disabled";
	};

	i2c@7000c500 {
		status = "disabled";
	};

	hdmiddc: i2c@7000c700 {
		status = "disabled";
		clock-frequency = <100000>;
	};

	serial@70006000 {
		status = "disabled";
	};

	serial@70006200 {
		status = "disabled";
	};

	pcie@3000 {
		status = "disabled";
	};
	
	gpio-keys {
		status = "disabled";
	};

	host1x@50000000 {

		dc@54200000 {
			rgb {
				status = "disabled";

				nvidia,panel = <&panel>;
			};
		};
	
		hdmi@54280000 {
			status = "okay";

			hdmi-supply = <&vdd_5v0_hdmi>;
			vdd-supply = <&sys_3v3_reg>;
			pll-supply = <&vio_reg>;

			nvidia,hpd-gpio =
				<&gpio TEGRA_GPIO(N, 7) GPIO_ACTIVE_HIGH>;
			nvidia,ddc-i2c-bus = <&hdmiddc>;
		};
	};

	i2c@7000d000 {
			wm8903: wm8903@1a {
				status = "okay";
				default-state = "keep";
			};

			pmic: tps65911@2d {
				default-state = "keep";
			};
	};


	regulators {
		compatible = "simple-bus";
		#address-cells = <1>;
		#size-cells = <0>;

		ddr_reg: regulator@100 {
			compatible = "regulator-fixed";
			regulator-name = "ddr";
			reg = <100>;
			regulator-min-microvolt = <1500000>;
			regulator-max-microvolt = <1500000>;
			regulator-always-on;
			regulator-boot-on;
			enable-active-high;
			gpio = <&pmic 7 GPIO_ACTIVE_HIGH>;
		};

		sys_3v3_reg: regulator@101 {
			compatible = "regulator-fixed";
			reg = <101>;
			regulator-name = "sys_3v3";
			regulator-min-microvolt = <3300000>;
			regulator-max-microvolt = <3300000>;
			regulator-always-on;
			regulator-boot-on;
			enable-active-high;
			gpio = <&pmic 6 GPIO_ACTIVE_HIGH>;
		};

		usb1_vbus_reg: regulator@102 {
			compatible = "regulator-fixed";
			reg = <102>;
			regulator-name = "usb1_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			enable-active-high;
			gpio = <&gpio TEGRA_GPIO(DD, 6) GPIO_ACTIVE_HIGH>;
			gpio-open-drain;
			vin-supply = <&vdd_5v0_reg>;
		};

		usb3_vbus_reg: regulator@103 {
			compatible = "regulator-fixed";
			reg = <103>;
			regulator-name = "usb3_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			enable-active-high;
			gpio = <&gpio TEGRA_GPIO(DD, 4) GPIO_ACTIVE_HIGH>;
			gpio-open-drain;
			vin-supply = <&vdd_5v0_reg>;
		};

		vdd_5v0_reg: regulator@104 {
			compatible = "regulator-fixed";
			reg = <104>;
			regulator-name = "5v0";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			enable-active-high;
			gpio = <&pmic 8 GPIO_ACTIVE_HIGH>;
		};

		vdd_bl_reg: regulator@105 {
			compatible = "regulator-fixed";
			reg = <105>;
			regulator-name = "vdd_bl";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			regulator-always-on;
			regulator-boot-on;
			enable-active-high;
			gpio = <&gpio TEGRA_GPIO(DD, 2) GPIO_ACTIVE_HIGH>;
		};

		vdd_bl2_reg: regulator@106 {
			compatible = "regulator-fixed";
			reg = <106>;
			regulator-name = "vdd_bl2";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			regulator-always-on;
			regulator-boot-on;
			enable-active-high;
			gpio = <&gpio TEGRA_GPIO(DD, 0) GPIO_ACTIVE_HIGH>;
		};

		vdd_5v0_hdmi: regulator@8 {
			compatible = "regulator-fixed";
			reg = <8>;
			regulator-name = "+VDD_5V_HDMI";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			regulator-always-on;
			regulator-boot-on;
			vin-supply = <&sys_3v3_reg>;
		};

	};
};
